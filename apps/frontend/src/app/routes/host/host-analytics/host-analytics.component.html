<app-page>
  <div body>
    <h1 i18n>Analytics</h1>
    <ui-hr> </ui-hr>

    <div class="bg-white p-4 rounded shadow-sm mb-4 w-full">
      <div class="flex justify-between items-center">
        <p i18n>
          <b>{{ selectedPeriod | titlecase }}</b> snapshot of all your performances
        </p>
        <ui-form [form]="periodForm"></ui-form>
      </div>

      <div class="flex space-x-4 w-full">
        <div
          *ngFor="let header of headerItems | keyvalue"
          class="bg-white rounded overflow-hidden shadow relative w-1/4"
        >
          <div class="p-4 absolute z-10">
            <h2>{{ header.value.title }}</h2>
            <h3>{{ header.value.aggregation }} ({{ header.value.difference }})</h3>
          </div>
          <ngx-chartjs
            class="opacity-25 pt-12"
            type="line"
            [data]="header.value.graph.data"
            [options]="header.value.graph.options"
          ></ngx-chartjs>
        </div>
      </div>
    </div>

    <div class="bg-white p-4 rounded shadow-sm mb-4 w-full">
      <h2 i18n>Performances</h2>
      <p i18n>Filter by columns for aggregated analytics</p>
      <ui-table [table]="analyticsTable"></ui-table>
    </div>
  </div>
</app-page>
